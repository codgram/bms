<div class="top-row ps-3 navbar navbar-white">
    <div class="container-fluid">
        @* <a class="navbar-brand" href="">Application</a> *@
        <div class="d-flex text-center" ><div class="w-32 h-32 d-flex text-center justify-content-center bg-dark text-light rounded p-1 me-2">
                A
        </div>
        <a class="navbar-brand font-semibold ms-1" href="" >@(!String.IsNullOrEmpty(CompanyName) ? CompanyName : "Application")</a></div>
        <button title="Navigation menu" class="navbar-toggler" @onclick="ToggleNavMenu">
            <span class="navbar-toggler-icon"></span>
        </button>
    </div>
</div>

<div class="@NavMenuCssClass" @onclick="ToggleNavMenu">
    <nav class="flex-column">

        <div class="nav-item px-3">
            <NavLink class="nav-link" href="" Match="NavLinkMatch.All">
                <span class="oi oi-home ms-2" aria-hidden="true"></span> Home
            </NavLink>
        </div>
        
        @* <AuthorizeView Roles='@($"{_stateContainer.Company.Code}_User")'>
            <Authorized>
                <div class="nav-item px-3">
                    <NavLink class="nav-link" href="" Match="NavLinkMatch.All">
                        <span class="oi oi-home" aria-hidden="true"></span> Home
                    </NavLink>
                </div>
            </Authorized>
        </AuthorizeView> *@

        @if(_stateContainer.Company is not null)
        {
            <AuthorizeView Roles='@($"{_stateContainer.Company.Code}_Owner, {_stateContainer.Company.Code}_Admin")'>
                <Authorized>
                    <div class="nav-item px-3">
                        <NavLink class="nav-link" href="org/entities">
                            <i class="bi bi-building ms-2 me-2" style="font-size:1.2rem"></i> Entities
                        </NavLink>
                    </div>
                    <div class="nav-item px-3">
                        <NavLink class="nav-link" href="org/stores">
                            <i class="bi bi-shop ms-2 me-2" style="font-size:1.2rem"></i> Stores
                        </NavLink>
                    </div>
                    <div class="nav-item px-3">
                        <NavLink class="nav-link" href="admin/users">
                            <i class="bi bi-person ms-2 me-2" style="font-size:1.2rem"></i> Users
                        </NavLink>
                    </div>
                </Authorized>
            </AuthorizeView>

            <AuthorizeView Roles='@($"{_stateContainer.Company.Code}_Owner, {_stateContainer.Company.Code}_Admin, {_stateContainer.Company.Id}_ReceivingAdmin")'>
                <Authorized>
                    <div class="nav-item px-3">
                        <NavLink class="nav-link" href="works/custom/headers">
                            <span class="oi oi-plus ms-2" aria-hidden="true"></span> Custom Works
                        </NavLink>
                    </div>
                </Authorized>
            </AuthorizeView>

        }

        
        
        
        
    </nav>
</div>

@code {
    
    [Parameter] public string CompanyName { get; set; }
    private bool collapseNavMenu = true;

    private string? NavMenuCssClass => collapseNavMenu ? "collapse" : null;

    private void ToggleNavMenu()
    {
        collapseNavMenu = !collapseNavMenu;
    }
}
